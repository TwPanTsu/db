<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="zh">
<head>
<!-- Generated by javadoc (1.8.0_321) on Thu Apr 07 14:40:00 CST 2022 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Buffer (vanillacore 0.6.0-course-20220407 API)</title>
<meta name="date" content="2022-04-07">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="Buffer (vanillacore 0.6.0-course-20220407 API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Buffer.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../../../org/vanilladb/core/storage/buffer/BufferAbortException.html" title="class in org.vanilladb.core.storage.buffer"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/vanilladb/core/storage/buffer/Buffer.html" target="_top">Frames</a></li>
<li><a href="Buffer.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.vanilladb.core.storage.buffer</div>
<h2 title="Class Buffer" class="title">Class Buffer</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.vanilladb.core.storage.buffer.Buffer</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">Buffer</span>
extends <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></pre>
<div class="block">An individual buffer. A buffer wraps a page and stores information about its
 status, such as the disk block associated with the page, the number of times
 the block has been pinned, whether the contents of the page have been
 modified, and if so, the id of the modifying transaction and the LSN of the
 corresponding log record.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/vanilladb/core/storage/buffer/Buffer.html#BUFFER_SIZE">BUFFER_SIZE</a></span></code>
<div class="block">The available size (in bytes) for a buffer.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code><a href="../../../../../org/vanilladb/core/storage/file/BlockId.html" title="class in org.vanilladb.core.storage.file">BlockId</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/vanilladb/core/storage/buffer/Buffer.html#block--">block</a></span>()</code>
<div class="block">Returns a block ID refers to the disk block that the buffer is pinned to.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/vanilladb/core/storage/buffer/Buffer.html#close--">close</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>protected <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/locks/Lock.html?is-external=true" title="class or interface in java.util.concurrent.locks">Lock</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/vanilladb/core/storage/buffer/Buffer.html#getSwapLock--">getSwapLock</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code><a href="../../../../../org/vanilladb/core/sql/Constant.html" title="class in org.vanilladb.core.sql">Constant</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/vanilladb/core/storage/buffer/Buffer.html#getVal-int-org.vanilladb.core.sql.Type-">getVal</a></span>(int&nbsp;offset,
      <a href="../../../../../org/vanilladb/core/sql/Type.html" title="class in org.vanilladb.core.sql">Type</a>&nbsp;type)</code>
<div class="block">Returns the value at the specified offset of this buffer's page.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code><a href="../../../../../org/vanilladb/core/storage/log/LogSeqNum.html" title="class in org.vanilladb.core.storage.log">LogSeqNum</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/vanilladb/core/storage/buffer/Buffer.html#lastLsn--">lastLsn</a></span>()</code>
<div class="block">Return the log sequence number (LSN) of the latest log record 
 which has been applied to this buffer.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/vanilladb/core/storage/buffer/Buffer.html#lockFlushing--">lockFlushing</a></span>()</code>
<div class="block">Lock the flushing mechanism in order to prevent a thread
 flushing this buffer while another thread is doing a 
 physiological operation.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/vanilladb/core/storage/buffer/Buffer.html#setVal-int-org.vanilladb.core.sql.Constant-long-org.vanilladb.core.storage.log.LogSeqNum-">setVal</a></span>(int&nbsp;offset,
      <a href="../../../../../org/vanilladb/core/sql/Constant.html" title="class in org.vanilladb.core.sql">Constant</a>&nbsp;val,
      long&nbsp;txNum,
      <a href="../../../../../org/vanilladb/core/storage/log/LogSeqNum.html" title="class in org.vanilladb.core.storage.log">LogSeqNum</a>&nbsp;lsn)</code>
<div class="block">Writes a value to the specified offset of this buffer's page.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/vanilladb/core/storage/buffer/Buffer.html#unlockFlushing--">unlockFlushing</a></span>()</code>
<div class="block">Unlock the flushing mechanism to make a buffer be able to
 be flushed by other thread.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang">finalize</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="BUFFER_SIZE">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>BUFFER_SIZE</h4>
<pre>public static final&nbsp;int BUFFER_SIZE</pre>
<div class="block">The available size (in bytes) for a buffer. Besides the data from users,
 a buffer also puts some meta-data in front of them. The size of a buffer,
 therefore, is slightly smaller than the size of an physical block in storages.</div>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getVal-int-org.vanilladb.core.sql.Type-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getVal</h4>
<pre>public&nbsp;<a href="../../../../../org/vanilladb/core/sql/Constant.html" title="class in org.vanilladb.core.sql">Constant</a>&nbsp;getVal(int&nbsp;offset,
                       <a href="../../../../../org/vanilladb/core/sql/Type.html" title="class in org.vanilladb.core.sql">Type</a>&nbsp;type)</pre>
<div class="block">Returns the value at the specified offset of this buffer's page. If an
 integer was not stored at that location, the behavior of the method is
 unpredictable.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>offset</code> - the byte offset of the page</dd>
<dd><code>type</code> - the type of the value</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the constant value at that offset</dd>
</dl>
</li>
</ul>
<a name="setVal-int-org.vanilladb.core.sql.Constant-long-org.vanilladb.core.storage.log.LogSeqNum-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setVal</h4>
<pre>public&nbsp;void&nbsp;setVal(int&nbsp;offset,
                   <a href="../../../../../org/vanilladb/core/sql/Constant.html" title="class in org.vanilladb.core.sql">Constant</a>&nbsp;val,
                   long&nbsp;txNum,
                   <a href="../../../../../org/vanilladb/core/storage/log/LogSeqNum.html" title="class in org.vanilladb.core.storage.log">LogSeqNum</a>&nbsp;lsn)</pre>
<div class="block">Writes a value to the specified offset of this buffer's page. This method
 assumes that the transaction has already written an appropriate log
 record. The buffer saves the id of the transaction and the LSN of the log
 record. A negative lsn value indicates that a log record was not
 necessary.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>offset</code> - the byte offset within the page</dd>
<dd><code>val</code> - the new value to be written</dd>
<dd><code>txNum</code> - the id of the transaction performing the modification</dd>
<dd><code>lsn</code> - the LSN of the corresponding log record</dd>
</dl>
</li>
</ul>
<a name="lastLsn--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lastLsn</h4>
<pre>public&nbsp;<a href="../../../../../org/vanilladb/core/storage/log/LogSeqNum.html" title="class in org.vanilladb.core.storage.log">LogSeqNum</a>&nbsp;lastLsn()</pre>
<div class="block">Return the log sequence number (LSN) of the latest log record 
 which has been applied to this buffer. Note that the last LSN
 might be <code>null</code>.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the LSN of the latest affected log record</dd>
</dl>
</li>
</ul>
<a name="block--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>block</h4>
<pre>public&nbsp;<a href="../../../../../org/vanilladb/core/storage/file/BlockId.html" title="class in org.vanilladb.core.storage.file">BlockId</a>&nbsp;block()</pre>
<div class="block">Returns a block ID refers to the disk block that the buffer is pinned to. <br><br>
 
 <b>Warning:</b><br>
 Always make sure to get buff.block() before unpin.<br>
 Or you may get an unexpected block.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a block ID</dd>
</dl>
</li>
</ul>
<a name="lockFlushing--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lockFlushing</h4>
<pre>public&nbsp;void&nbsp;lockFlushing()</pre>
<div class="block">Lock the flushing mechanism in order to prevent a thread
 flushing this buffer while another thread is doing a 
 physiological operation.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../org/vanilladb/core/storage/buffer/Buffer.html#unlockFlushing--"><code>unlockFlushing()</code></a></dd>
</dl>
</li>
</ul>
<a name="unlockFlushing--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>unlockFlushing</h4>
<pre>public&nbsp;void&nbsp;unlockFlushing()</pre>
<div class="block">Unlock the flushing mechanism to make a buffer be able to
 be flushed by other thread. Note that the thread unlocking
 this mechanism must be the same thread as the one locking.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../org/vanilladb/core/storage/buffer/Buffer.html#lockFlushing--"><code>lockFlushing()</code></a></dd>
</dl>
</li>
</ul>
<a name="getSwapLock--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSwapLock</h4>
<pre>protected&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/locks/Lock.html?is-external=true" title="class or interface in java.util.concurrent.locks">Lock</a>&nbsp;getSwapLock()</pre>
</li>
</ul>
<a name="close--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>close</h4>
<pre>protected&nbsp;void&nbsp;close()</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Buffer.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../../../org/vanilladb/core/storage/buffer/BufferAbortException.html" title="class in org.vanilladb.core.storage.buffer"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/vanilladb/core/storage/buffer/Buffer.html" target="_top">Frames</a></li>
<li><a href="Buffer.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2022 <a href="http://www.vanilladb.org">VanillaDB Organization</a>. All rights reserved.</small></p>
</body>
</html>
